---
# Load DA configuration variables based on data_availability_role
- name: Load DA-specific variables
  include_vars: "{{ role_path }}/vars/{{ data_availability_role }}.yaml"

# Validate DA configuration
- name: Validate DA configuration
  import_tasks: validate_da.yaml

# Load zkvm configuration variables
- include_vars: "../../zkvm/{{ zkvm_role }}/defaults/main.yaml"

- name: git update
  import_tasks: git.yaml

- name: genesis
  import_tasks: genesis.yaml

- name: rollup configuration setup
  include_tasks: config.yaml

- name: setup zkvm (if required)
  include_tasks: "../../zkvm/{{ zkvm_role }}/tasks/main.yaml"

- name: build rollup binary
  include_tasks: build.yaml

- name: rollup service
  include_tasks: service.yaml

- name: install and setup nginx
  include_tasks: nginx.yaml
