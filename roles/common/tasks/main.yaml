---

- name: set custom variables
  include_tasks: custom_vars.yaml

- name: create user
  include_tasks: user.yaml

- name: deploy login banner
  include_tasks: motd.yaml

- name: install dependencies
  include_tasks: deps.yaml

- name: chrony
  include_tasks: chrony.yaml

- name: tune host
  include_tasks: system_tuner.yaml

- name: folders
  include_tasks: dirs.yaml

- name: setup disks
  include_tasks: disks.yaml
  when: setup_disks | bool

- name: telegraf agent for monitoring metrics
  include_tasks: telegraf.yaml

- name: grafana alloy agent for exporting logs and traces
  include_tasks: grafana_alloy.yaml

- name: setup local postgresql
  include_tasks: postgres.yaml
  when: rollup_sequencer_postgres_connection_string is not defined or rollup_sequencer_postgres_connection_string | length == 0